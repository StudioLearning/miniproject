@using Contentful.Core.Models
@using miniproject.Models.Contentful

@model Lesson

@{
    ViewData["Title"] = "Course";
}
<nav aria-label="breadcrumb">
    <ol class="breadcrumb">
        <li class="breadcrumb-item"><a class="text-decoration-none" asp-area="" asp-controller="Home"
                asp-action="Index"><i class="fas fa-home"></i> หน้าแรก</a></li>
        <li class="breadcrumb-item"><a class="text-decoration-none" asp-area="" asp-controller="Course"
                asp-action="Index">คอร์ส</a>
        </li>
        <li class="breadcrumb-item active" aria-current="page">@Model.sku</li>
    </ol>
</nav>
<h1>@ViewData["Title"] @Model.name</h1>
<div class="row">
    <div class="col">
        <p class="fw-bold fs-3">
            <i class="far fa-star" style="color: #FFD43B"></i>
            ตัวอย่างคอร์สเรียน @Model.name
        </p>
    </div>
</div>

<div class="row text-center">
    <div class="col">
        <iframe width="100%" height="315" src="@(ViewData["examplevideo"])?controls=0" title="YouTube video player"
            frameborder="0"
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
            allowfullscreen></iframe>
    </div>
</div>

<div class="row pt-4">
    <div class="col" style="text-indent: 2rem; font-size: 1.2rem">
        <contentful-rich-text document="@(Model.content)"></contentful-rich-text>
    </div>
</div>
<div class="row text-center">
    <div class="col-12">
        <p>
            @foreach (var courseType in Model.courses)
            {
                <span class="p-3">
                    <a class="link text-decoration-none" asp-area="" asp-controller="Course" asp-action="Type"
                    asp-route-id="@(courseType.name)">
                        <i class="@Html.Raw(courseType.fontIconTag)"></i> @(courseType.name)
                    </a>
                </span>
            }
        </p>
    </div>
    <div class="col-12 fs-3 fw-bold">
        <partial name="_RateStar" />
        <p>THB@(Model.price)</p>
    </div>
    <div class="col-12 pb-3">
        <i class="fas fa-graduation-cap fa-2x"></i><br />
        <a class="link text-decoration-none" asp-area="" asp-controller="Course" asp-action="Teacher"
            asp-route-id="@(Model.teacher.teacherId)">
            @(Model.teacher.teacherName)
        </a>
    </div>
    <div class="col-12 pb-5">
        <a class="btn btn-primary" asp-area="" asp-controller="Payment" asp-action="Course" asp-route-id="@Model.sku">
            Buy Course <i class="fas fa-arrow-right"></i>
        </a>
    </div>
</div>

<div class="row">
    <div class="col">
        <ul class="nav nav-tabs" id="myTab" role="tablist">
            @{
                int CourseIndex = 1;
            }
            @foreach (var item in Model.course)
            {

                <li class="nav-item" role="presentation">
                    <button class="nav-link @(CourseIndex == 1 ? "active":"")" id="tab-course-@(CourseIndex)"
                    data-bs-toggle="tab" data-bs-target="#content@(CourseIndex)" type="button" role="tab"
                    aria-controls="content@(CourseIndex)"
                    aria-selected="@(CourseIndex == 1 ? "true":"false")">เนื้อหาที่ @CourseIndex</button>
                </li>
                CourseIndex++;
            }

        </ul>
        <div class="tab-content p-3 pt-5" id="myTabContent">
            @{
                CourseIndex = 1;
            }
            @foreach (var item in Model.course)
            {
                <div class="tab-pane fade @(CourseIndex == 1 ? "show active":"")" id="content@(CourseIndex)" role="tabpanel"
                aria-labelledby="tab-course-@(CourseIndex)">
                    <contentful-rich-text document="@(item.coursecontent)"></contentful-rich-text>
                    <video width="100%" controls>
                        <source src="@(item.coursevideo.File.Url)" type="video/mp4">
                        Your browser does not support HTML video.
                    </video>
                </div>
                CourseIndex++;
            }
        </div>
    </div>
</div>
